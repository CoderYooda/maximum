(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"MO+r":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.cat_edit{\n    right: -13px;\n    position: absolute;\n    top: 5px;\n    opacity: 0.3;\n}\n.cat_edit:hover{\n    opacity: 1;\n}\n",""])},Txfq:function(t,e,a){"use strict";a("kv5J")},VamX:function(t,e,a){"use strict";a.r(e);var r={name:"Shop",data:function(){return{new_category_name:null,new_cat_field:!1}},watch:{"$route.params.category_id":function(t){this.category_id=t}},computed:{current_category:function(){return this.$store.getters.getCategory(this.category_id)},parent_id:function(){return this.$store.getters.getParent(this.category_id)},category_id:{get:function(){return parseInt(this.$route.params.category_id)||0},set:function(t){return t}},categories:function(){return this.$store.getters.getByParent(this.category_id)},products:function(){return this.$store.getters.getByCategoryId(this.category_id)}},mounted:function(){this.$store.dispatch("get_categories"),this.$store.dispatch("get_products"),this.category_id=parseInt(this.$route.params.category_id)||0},methods:{open_cat_edit:function(){var t=this;this.new_cat_field=!0,setTimeout((function(){t.$refs.cat_input.focus()}),50)},store_category:function(){var t=this,e={name:this.new_category_name,parent_id:this.category_id,title:this.new_category_name,slug:window.urlRusLat(this.new_category_name)};this.$store.dispatch("store_category",e).then((function(){t.new_category_name="",t.new_cat_field=!1}))}}},s=(a("Txfq"),a("KHd+")),i=Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filemgr-wrapper filemgr-wrapper-two"},[a("div",{staticClass:"filemgr-sidebar"},[a("div",{staticClass:"filemgr-sidebar-header"},[a("div",{staticClass:"dropdown dropdown-icon flex-fill"},[t._m(0),t._v(" "),a("div",{staticClass:"dropdown-menu tx-13"},[a("router-link",{attrs:{to:{name:"category",params:{category_id:0},query:{category:t.current_category?t.current_category.id:0}},custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.href,s=(e.route,e.navigate);e.isActive,e.isExactActive;return[a("a",{staticClass:"dropdown-item",attrs:{href:r},on:{click:s}},[a("svg",{staticClass:"feather feather-folder",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[a("path",{attrs:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}})]),t._v(" "),a("span",[t._v("Категорию")])])]}}])}),t._v(" "),a("router-link",{attrs:{to:{name:"product",params:{product_id:0},query:{category:t.current_category?t.current_category.id:0}},custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.href,s=(e.route,e.navigate);e.isActive,e.isExactActive;return[a("a",{staticClass:"dropdown-item",attrs:{href:r},on:{click:s}},[a("svg",{staticClass:"feather feather-tag",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[a("path",{attrs:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}}),a("line",{attrs:{x1:"7",y1:"7",x2:"7",y2:"7"}})]),t._v(" "),a("span",[t._v("Товар")])])]}}])})],1)])]),t._v(" "),a("div",{staticClass:"filemgr-sidebar-body"},[a("div",{staticClass:"flex-fill pd-y-20 pd-x-10"},[a("div",{staticClass:"d-flex align-items-center justify-content-between pd-x-10 mg-b-10"},[a("span",{staticClass:"tx-10 tx-uppercase tx-medium tx-color-03 tx-sans tx-spacing-1"},[t._v(t._s(t.current_category?t.current_category.name:"Корневой каталог"))]),t._v(" "),a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Новая категория"},expression:"{ content: 'Новая категория' }"}],staticClass:"chat-btn-add",attrs:{href:"#","data-toggle":"modal"},on:{click:function(e){return e.preventDefault(),t.open_cat_edit(e)}}},[a("span",[a("svg",{staticClass:"feather feather-plus-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[a("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),a("line",{attrs:{x1:"12",y1:"8",x2:"12",y2:"16"}}),a("line",{attrs:{x1:"8",y1:"12",x2:"16",y2:"12"}})])])])]),t._v(" "),a("div",{staticClass:"mg-b-15",class:{"d-none":!t.new_cat_field}},[a("div",{staticClass:"input-group mg-b-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_category_name,expression:"new_category_name"}],ref:"cat_input",staticClass:"form-control",staticStyle:{height:"30px","line-height":"30px"},attrs:{type:"text",placeholder:"Название категории"},domProps:{value:t.new_category_name},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.store_category()},input:function(e){e.target.composing||(t.new_category_name=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Сохранить категорию"},expression:"{ content: 'Сохранить категорию' }"}],staticClass:"btn btn-outline-light",staticStyle:{height:"30px","line-height":"16px"},on:{click:function(e){return e.preventDefault(),t.store_category()}}},[a("svg",{staticClass:"css-i6dzq1",attrs:{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[a("path",{attrs:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}}),a("polyline",{attrs:{points:"17 21 17 13 7 13 7 21"}}),a("polyline",{attrs:{points:"7 3 7 8 15 8"}})])])])])]),t._v(" "),a("nav",{staticClass:"nav nav-sidebar tx-13"},[a("router-link",{attrs:{to:{name:"shop",params:{category_id:t.parent_id}},custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.href,s=(e.route,e.navigate);e.isActive,e.isExactActive;return[t.category_id?a("a",{staticClass:"nav-link active",attrs:{href:r},on:{click:s}},[t._v("../")]):t._e()]}}])}),t._v(" "),t._l(t.categories,(function(e){return a("router-link",{key:e.id,attrs:{to:{name:"shop",params:{category_id:e.id}},custom:""},scopedSlots:t._u([{key:"default",fn:function(r){var s=r.href,i=(r.route,r.navigate);r.isActive,r.isExactActive;return[a("a",{staticClass:"nav-link",attrs:{href:s},on:{click:i}},[a("i",{attrs:{"data-feather":"folder"}}),t._v(" "),a("span",[t._v(t._s(e.name))]),t._v(" "),a("router-link",{attrs:{to:{name:"category",params:{category_id:e.id}},custom:""},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.href,r=(t.route,t.navigate),s=t.isActive;t.isExactActive;return[a("div",{staticClass:"cat_edit",class:[s&&"active"]},[a("a",{attrs:{href:e},on:{click:r}},[a("svg",{staticClass:"feather feather-edit",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[a("path",{attrs:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}}),a("path",{attrs:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}})])])])]}}],null,!0)})],1)]}}],null,!0)})}))],2)])])]),t._v(" "),a("div",{staticClass:"filemgr-content"},[a("div",{staticClass:"filemgr-content-header"},[a("h4",{staticClass:"mg-b-0"},[t._v(t._s(t.current_category?t.current_category.name:"Корневой каталог"))]),t._v(" "),t._m(1)]),t._v(" "),a("div",{staticClass:"filemgr-content-body"},[a("perfect-scrollbar",{staticStyle:{height:"calc(100%)"}},[a("div",{staticClass:"pd-20 pd-lg-25 pd-xl-30"},[a("label",{staticClass:"d-block tx-medium tx-10 tx-uppercase tx-sans tx-spacing-1 tx-color-03 mg-b-15"},[t._v('Товары в категории "'+t._s(t.current_category?t.current_category.name:"Корневой каталог")+'"')]),t._v(" "),a("div",{staticClass:"row row-xs"},t._l(t.products,(function(e){return a("router-link",{key:e.id,attrs:{to:{name:"product",params:{product_id:e.id,cat:1}},custom:""},scopedSlots:t._u([{key:"default",fn:function(r){r.href,r.route;var s=r.navigate;r.isActive,r.isExactActive;return[a("div",{staticClass:"col-6 col-sm-4 col-md-3 mg-t-10",on:{click:s}},[a("div",{staticClass:"card card-file pointer"},[a("div",{staticClass:"card-file-thumb tx-purple"},[a("img",{staticClass:"preview",attrs:{src:e.images[0]?e.images[0].url:"/images/noimage.jpg",alt:""}})]),t._v(" "),a("div",{staticClass:"card-body"},[a("h6",[a("a",{staticClass:"link-02",attrs:{href:""}},[t._v(t._s(e.name))])]),t._v(" "),a("span",[t._v(t._s(e.price))])])])])]}}],null,!0)})})),1)])])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-xs btn-block btn-white",attrs:{"data-toggle":"dropdown"}},[this._v("Создать "),e("i",{attrs:{"data-feather":"chevron-down"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"nav d-none d-sm-flex mg-l-auto"},[e("a",{staticClass:"nav-link",attrs:{href:""}},[e("i",{attrs:{"data-feather":"list"}})]),this._v(" "),e("a",{staticClass:"nav-link",attrs:{href:""}},[e("i",{attrs:{"data-feather":"alert-circle"}})]),this._v(" "),e("a",{staticClass:"nav-link",attrs:{href:""}},[e("i",{attrs:{"data-feather":"settings"}})])])}],!1,null,null,null);e.default=i.exports},kv5J:function(t,e,a){var r=a("MO+r");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,s);r.locals&&(t.exports=r.locals)}}]);