(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{i4Al:function(t,e,s){"use strict";s.r(e);var i=s("QbiA"),a=s("zUJn"),r=s("8j27"),l={components:{ImagesUpload:i.a,EditorContent:a.b,EditorMenuBubble:a.c},name:"article",data:function(){var t=this;return{article:{name:"",content:"",description:"",slug:"",title:"",isPublished:!0,images:[]},editor:new a.a({extensions:[new r.a,new r.c,new r.e,new r.f,new r.g({levels:[1,2,3]}),new r.k,new r.l,new r.n,new r.o,new r.j,new r.b,new r.d,new r.i,new r.m,new r.p,new r.h],content:"",onInit:function(){},onUpdate:function(e){var s=e.getHTML;t.article.content=s()}})}},watch:{"article.slug":function(t){this.article.slug=window.urlRusLat(t)},"article.title":function(t){this.article.slug=window.urlRusLat(t),this.article.title=t}},mounted:function(){var t=this;this.$store.dispatch("get_articles").then((function(){t.article=t.$store.getters.getarticleById(t.$route.params.id)[0],t.editor.setContent(t.article.content),t.$refs.imgLoader.setImages(t.article.images),console.log(t.article)}))},computed:{},methods:{setImages:function(t){this.article.images=t.images},save:function(){var t=this,e=this.article.id?"update_article":"store_article";this.$store.dispatch(e,this.article).then((function(){t.$router.push({name:"articles"})}))}}},c=s("KHd+"),o=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-sm-flex align-items-center justify-content-between mg-b-20 mg-lg-b-30"},[s("div",[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb breadcrumb-style1 mg-b-10"},[s("router-link",{attrs:{to:"/site",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.href,a=(e.route,e.navigate);e.isActive,e.isExactActive;return[s("li",{staticClass:"breadcrumb-item"},[s("a",{attrs:{href:i},on:{click:a}},[t._v("Управление сайтом")])])]}}])}),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("\n                        "+t._s(t.article.id?'Редактирование статьи "'+t.article.name+'"':"Создание статьи")+"\n                    ")])],1)]),t._v(" "),s("h4",{staticClass:"mg-b-0 tx-spacing--1"},[t._v(t._s(t.article.id?'Редактирование статьи "'+t.article.name+'"':"Новая статья"))])]),t._v(" "),s("div",{staticClass:"d-none d-md-block"},[s("button",{staticClass:"btn btn-sm pd-x-15 btn-white btn-uppercase",on:{click:t.save}},[t._v("Сохранить")])])]),t._v(" "),s("div",{staticClass:"overflow-hidden"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.article.isPublished,expression:"article.isPublished"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"isPublished"},domProps:{checked:Array.isArray(t.article.isPublished)?t._i(t.article.isPublished,null)>-1:t.article.isPublished},on:{change:function(e){var s=t.article.isPublished,i=e.target,a=!!i.checked;if(Array.isArray(s)){var r=t._i(s,null);i.checked?r<0&&t.$set(t.article,"isPublished",s.concat([null])):r>-1&&t.$set(t.article,"isPublished",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.article,"isPublished",a)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"isPublished"}},[t._v(" Опубликована")])])])]),t._v(" "),s("ImagesUpload",{ref:"imgLoader",attrs:{limit:"1"},on:{imagesChanged:t.setImages}}),t._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[t._v("Название страницы (Title)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.article.title,expression:"article.title"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.article_store_errors.title},attrs:{type:"text",placeholder:"Тайтл"},domProps:{value:t.article.title},on:{input:function(e){e.target.composing||t.$set(t.article,"title",e.target.value)}}}),t._v(" "),this.$store.getters.article_store_errors.title?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.article_store_errors.title[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[t._v("URL")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.article.slug,expression:"article.slug"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.article_store_errors.slug},attrs:{type:"text",placeholder:"URL"},domProps:{value:t.article.slug},on:{input:function(e){e.target.composing||t.$set(t.article,"slug",e.target.value)}}}),t._v(" "),this.$store.getters.article_store_errors.slug?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.article_store_errors.slug[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[t._v("Описание страницы (Description)")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.article.description,expression:"article.description"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.article_store_errors.description},attrs:{rows:"4"},domProps:{value:t.article.description},on:{input:function(e){e.target.composing||t.$set(t.article,"description",e.target.value)}}}),t._v(" "),this.$store.getters.article_store_errors.description?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.article_store_errors.description[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[t._v("Название статьи (H1)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.article.name,expression:"article.name"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.article_store_errors.name},attrs:{type:"text",placeholder:"Наименование клиента"},domProps:{value:t.article.name},on:{input:function(e){e.target.composing||t.$set(t.article,"name",e.target.value)}}}),t._v(" "),this.$store.getters.article_store_errors.name?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.article_store_errors.name[0]))]):t._e()])]),t._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[t._v("Содержимое статьи")]),t._v(" "),s("editor-menu-bubble",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.commands,a=e.isActive,r=e.menu;return[s("div",{staticClass:"menububble",class:{"is-active":r.isActive},style:"left: "+r.left+"px; bottom: "+r.bottom+"px;"},[s("button",{staticClass:"menububble__button",class:{"is-active":a.bold()},on:{click:i.bold}},[s("img",{attrs:{src:"/images/icons/typo/bold-w.svg",alt:""}})]),t._v(" "),s("button",{staticClass:"menububble__button",class:{"is-active":a.italic()},on:{click:i.italic}},[s("img",{attrs:{src:"/images/icons/typo/italic-w.svg",alt:""}})]),t._v(" "),s("button",{staticClass:"menububble__button",class:{"is-active":a.code()},on:{click:i.code}},[s("img",{attrs:{src:"/images/icons/typo/code-w.svg",alt:""}})])])]}}])}),t._v(" "),s("editor-content",{attrs:{editor:t.editor}}),t._v(" "),this.$store.getters.vacancy_store_errors.content?s("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.vacancy_store_errors.content[0]))]):t._e()],1)])],1)])])}),[],!1,null,null,null);e.default=o.exports}}]);