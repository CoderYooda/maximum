(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{ofcq:function(t,s,e){"use strict";e.r(s);var i=e("QbiA"),a=e("zUJn"),o=e("8j27"),n={components:{ImagesUpload:i.a,EditorContent:a.b,EditorMenuBubble:a.c},name:"action",data:function(){var t=this;return{action:{name:"",content:"",description:"",slug:"",title:"",isPublished:!0,images:[]},editor:new a.a({extensions:[new o.a,new o.c,new o.e,new o.f,new o.g({levels:[1,2,3]}),new o.k,new o.l,new o.n,new o.o,new o.j,new o.b,new o.d,new o.i,new o.m,new o.p,new o.h],content:"",onInit:function(){},onUpdate:function(s){var e=s.getHTML;t.action.content=e()}})}},watch:{"action.slug":function(t){this.action.slug=window.urlRusLat(t)},"action.title":function(t){this.action.slug=window.urlRusLat(t),this.action.title=t}},mounted:function(){var t=this;this.$store.dispatch("get_actions").then((function(){t.action=t.$store.getters.getactionById(t.$route.params.id)[0],t.editor.setContent(t.action.content),t.$refs.imgLoader.setImages(t.action.images),console.log(t.action)}))},computed:{},methods:{setImages:function(t){this.action.images=t.images},save:function(){var t=this,s=this.action.id?"update_action":"store_action";this.$store.dispatch(s,this.action).then((function(){t.$router.push({name:"actions"})}))}}},c=e("KHd+"),r=Object(c.a)(n,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"d-sm-flex align-items-center justify-content-between mg-b-20 mg-lg-b-30"},[e("div",[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb breadcrumb-style1 mg-b-10"},[e("router-link",{attrs:{to:"/site",custom:""},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.href,a=(s.route,s.navigate);s.isActive,s.isExactActive;return[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:i},on:{click:a}},[t._v("Управление сайтом")])])]}}])}),t._v(" "),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("\n                            "+t._s(t.action.id?'Редактирование акции "'+t.action.name+'"':"Создание акции")+"\n                        ")])],1)]),t._v(" "),e("h4",{staticClass:"mg-b-0 tx-spacing--1"},[t._v(t._s(t.action.id?'Редактирование акции "'+t.action.name+'"':"Новая акция"))])]),t._v(" "),e("div",{staticClass:"d-none d-md-block"},[e("button",{staticClass:"btn btn-sm pd-x-15 btn-white btn-uppercase",on:{click:t.save}},[t._v("Сохранить")])])]),t._v(" "),e("div",{staticClass:"overflow-hidden"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"custom-control custom-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.action.isPublished,expression:"action.isPublished"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"isPublished"},domProps:{checked:Array.isArray(t.action.isPublished)?t._i(t.action.isPublished,null)>-1:t.action.isPublished},on:{change:function(s){var e=t.action.isPublished,i=s.target,a=!!i.checked;if(Array.isArray(e)){var o=t._i(e,null);i.checked?o<0&&t.$set(t.action,"isPublished",e.concat([null])):o>-1&&t.$set(t.action,"isPublished",e.slice(0,o).concat(e.slice(o+1)))}else t.$set(t.action,"isPublished",a)}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"isPublished"}},[t._v(" Опубликована")])])])]),t._v(" "),e("ImagesUpload",{ref:"imgLoader",attrs:{aspect:688/405,limit:"1"},on:{imagesChanged:t.setImages}}),t._v(" "),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"d-block"},[t._v("Тайтл ( Текст вкладки браузера )")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.action.title,expression:"action.title"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.action_store_errors.title},attrs:{type:"text",placeholder:"Тайтл"},domProps:{value:t.action.title},on:{input:function(s){s.target.composing||t.$set(t.action,"title",s.target.value)}}}),t._v(" "),this.$store.getters.action_store_errors.title?e("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.action_store_errors.title[0]))]):t._e()])]),t._v(" "),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"d-block"},[t._v("URL")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.action.slug,expression:"action.slug"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.action_store_errors.slug},attrs:{type:"text",placeholder:"URL"},domProps:{value:t.action.slug},on:{input:function(s){s.target.composing||t.$set(t.action,"slug",s.target.value)}}}),t._v(" "),this.$store.getters.action_store_errors.slug?e("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.action_store_errors.slug[0]))]):t._e()])]),t._v(" "),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"d-block"},[t._v("Описание страницы")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.action.description,expression:"action.description"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.action_store_errors.description},attrs:{rows:"4"},domProps:{value:t.action.description},on:{input:function(s){s.target.composing||t.$set(t.action,"description",s.target.value)}}}),t._v(" "),this.$store.getters.action_store_errors.description?e("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.action_store_errors.description[0]))]):t._e()])]),t._v(" "),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"d-block"},[t._v("Название акции")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.action.name,expression:"action.name"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.action_store_errors.name},attrs:{type:"text",placeholder:"Наименование клиента"},domProps:{value:t.action.name},on:{input:function(s){s.target.composing||t.$set(t.action,"name",s.target.value)}}}),t._v(" "),this.$store.getters.action_store_errors.name?e("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.action_store_errors.name[0]))]):t._e()])]),t._v(" "),e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"d-block"},[t._v("Описание акции")]),t._v(" "),e("editor-menu-bubble",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.commands,a=s.isActive,o=s.menu;return[e("div",{staticClass:"menububble",class:{"is-active":o.isActive},style:"left: "+o.left+"px; bottom: "+o.bottom+"px;"},[e("button",{staticClass:"menububble__button",class:{"is-active":a.bold()},on:{click:i.bold}},[e("img",{attrs:{src:"/images/icons/typo/bold-w.svg",alt:""}})]),t._v(" "),e("button",{staticClass:"menububble__button",class:{"is-active":a.italic()},on:{click:i.italic}},[e("img",{attrs:{src:"/images/icons/typo/italic-w.svg",alt:""}})]),t._v(" "),e("button",{staticClass:"menububble__button",class:{"is-active":a.code()},on:{click:i.code}},[e("img",{attrs:{src:"/images/icons/typo/code-w.svg",alt:""}})])])]}}])}),t._v(" "),e("editor-content",{attrs:{editor:t.editor}}),t._v(" "),this.$store.getters.vacancy_store_errors.content?e("div",{staticClass:"invalid-feedback"},[t._v(t._s(this.$store.getters.vacancy_store_errors.content[0]))]):t._e()],1)])],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);