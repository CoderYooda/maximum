(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{b3Lv:function(e,t,s){"use strict";s.r(t);var i=s("QbiA"),n=s("zUJn"),a=s("8j27"),o={components:{ImagesUpload:i.a,EditorContent:n.b,EditorMenuBubble:n.c},name:"neww",data:function(){var e=this;return{neww:{name:"",content:"",description:"",slug:"",title:"",isPublished:!0,images:[]},editor:new n.a({extensions:[new a.a,new a.c,new a.e,new a.f,new a.g({levels:[1,2,3]}),new a.k,new a.l,new a.n,new a.o,new a.j,new a.b,new a.d,new a.i,new a.m,new a.p,new a.h],content:"",onInit:function(){},onUpdate:function(t){var s=t.getHTML;e.neww.content=s()}})}},watch:{"neww.slug":function(e){this.neww.slug=window.urlRusLat(e)},"neww.title":function(e){this.neww.slug=window.urlRusLat(e),this.neww.title=e}},mounted:function(){var e=this;this.$store.dispatch("get_newws").then((function(){e.neww=e.$store.getters.getnewwById(e.$route.params.id)[0],e.editor.setContent(e.neww.content),e.$refs.imgLoader.setImages(e.neww.images),console.log(e.neww)}))},computed:{},methods:{setImages:function(e){this.neww.images=e.images},save:function(){var e=this,t=this.neww.id?"update_neww":"store_neww";this.$store.dispatch(t,this.neww).then((function(){e.$router.push({name:"news"})}))}}},r=s("KHd+"),l=Object(r.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"d-sm-flex align-items-center justify-content-between mg-b-20 mg-lg-b-30"},[s("div",[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb breadcrumb-style1 mg-b-10"},[s("router-link",{attrs:{to:"/site",custom:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.href,n=(t.route,t.navigate);t.isActive,t.isExactActive;return[s("li",{staticClass:"breadcrumb-item"},[s("a",{attrs:{href:i},on:{click:n}},[e._v("Управление сайтом")])])]}}])}),e._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e._v("\n                        "+e._s(e.neww.id?'Редактирование статьи "'+e.neww.name+'"':"Создание статьи")+"\n                    ")])],1)]),e._v(" "),s("h4",{staticClass:"mg-b-0 tx-spacing--1"},[e._v(e._s(e.neww.id?'Редактирование статьи "'+e.neww.name+'"':"Новая статья"))])]),e._v(" "),s("div",{staticClass:"d-none d-md-block"},[s("button",{staticClass:"btn btn-sm pd-x-15 btn-white btn-uppercase",on:{click:e.save}},[e._v("Сохранить")])])]),e._v(" "),s("div",{staticClass:"overflow-hidden"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.neww.isPublished,expression:"neww.isPublished"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"isPublished"},domProps:{checked:Array.isArray(e.neww.isPublished)?e._i(e.neww.isPublished,null)>-1:e.neww.isPublished},on:{change:function(t){var s=e.neww.isPublished,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=e._i(s,null);i.checked?a<0&&e.$set(e.neww,"isPublished",s.concat([null])):a>-1&&e.$set(e.neww,"isPublished",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.neww,"isPublished",n)}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"isPublished"}},[e._v(" Опубликована")])])])]),e._v(" "),s("ImagesUpload",{ref:"imgLoader",attrs:{aspect:2,limit:"1"},on:{imagesChanged:e.setImages}}),e._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[e._v("Название страницы (Title)")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.neww.title,expression:"neww.title"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.neww_store_errors.title},attrs:{type:"text",placeholder:"Тайтл"},domProps:{value:e.neww.title},on:{input:function(t){t.target.composing||e.$set(e.neww,"title",t.target.value)}}}),e._v(" "),this.$store.getters.neww_store_errors.title?s("div",{staticClass:"invalid-feedback"},[e._v(e._s(this.$store.getters.neww_store_errors.title[0]))]):e._e()])]),e._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[e._v("URL")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.neww.slug,expression:"neww.slug"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.neww_store_errors.slug},attrs:{type:"text",placeholder:"URL"},domProps:{value:e.neww.slug},on:{input:function(t){t.target.composing||e.$set(e.neww,"slug",t.target.value)}}}),e._v(" "),this.$store.getters.neww_store_errors.slug?s("div",{staticClass:"invalid-feedback"},[e._v(e._s(this.$store.getters.neww_store_errors.slug[0]))]):e._e()])]),e._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[e._v("Описание страницы (Description)")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.neww.description,expression:"neww.description"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.neww_store_errors.description},attrs:{rows:"4"},domProps:{value:e.neww.description},on:{input:function(t){t.target.composing||e.$set(e.neww,"description",t.target.value)}}}),e._v(" "),this.$store.getters.neww_store_errors.description?s("div",{staticClass:"invalid-feedback"},[e._v(e._s(this.$store.getters.neww_store_errors.description[0]))]):e._e()])]),e._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[e._v("Название статьи (H1)")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.neww.name,expression:"neww.name"}],staticClass:"form-control",class:{"is-invalid":!!this.$store.getters.neww_store_errors.name},attrs:{type:"text",placeholder:"Наименование клиента"},domProps:{value:e.neww.name},on:{input:function(t){t.target.composing||e.$set(e.neww,"name",t.target.value)}}}),e._v(" "),this.$store.getters.neww_store_errors.name?s("div",{staticClass:"invalid-feedback"},[e._v(e._s(this.$store.getters.neww_store_errors.name[0]))]):e._e()])]),e._v(" "),s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-block"},[e._v("Содержимое статьи")]),e._v(" "),s("editor-menu-bubble",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.commands,n=t.isActive,a=t.menu;return[s("div",{staticClass:"menububble",class:{"is-active":a.isActive},style:"left: "+a.left+"px; bottom: "+a.bottom+"px;"},[s("button",{staticClass:"menububble__button",class:{"is-active":n.bold()},on:{click:i.bold}},[s("img",{attrs:{src:"/images/icons/typo/bold-w.svg",alt:""}})]),e._v(" "),s("button",{staticClass:"menububble__button",class:{"is-active":n.italic()},on:{click:i.italic}},[s("img",{attrs:{src:"/images/icons/typo/italic-w.svg",alt:""}})]),e._v(" "),s("button",{staticClass:"menububble__button",class:{"is-active":n.code()},on:{click:i.code}},[s("img",{attrs:{src:"/images/icons/typo/code-w.svg",alt:""}})])])]}}])}),e._v(" "),s("editor-content",{attrs:{editor:e.editor}}),e._v(" "),this.$store.getters.vacancy_store_errors.content?s("div",{staticClass:"invalid-feedback"},[e._v(e._s(this.$store.getters.vacancy_store_errors.content[0]))]):e._e()],1)])],1)])])}),[],!1,null,null,null);t.default=l.exports}}]);